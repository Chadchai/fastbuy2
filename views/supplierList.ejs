<!DOCTYPE html>
<html >
<head>
  <!-- Site made with Mobirise Website Builder v4.8.3, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v4.8.3, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="/assets/images/logo2.png" type="image/x-icon">
  <meta name="description" content="Web Builder Description">
  <title>Supplier List</title>
  <link rel="stylesheet" href="/assets/web/assets/mobirise-icons/mobirise-icons.css">
  <link rel="stylesheet" href="/assets/tether/tether.min.css">
  <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap-grid.min.css">
  <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="/assets/dropdown/css/style.css">
  <link rel="stylesheet" href="/assets/animatecss/animate.min.css">
  <link rel="stylesheet" href="/assets/socicon/css/styles.css">
  <link rel="stylesheet" href="/assets/theme/css/style.css">
  <link rel="stylesheet" href="/assets/mobirise/css/mbr-additional.css" type="text/css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  


  
  
</head>
<body>
        <section class="menu cid-qTkzRZLJNu" once="menu" id="menu1-e">

                <% if (user_status == "loggined" && customer) {%>
        
            <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <div class="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </button>
                <div class="menu-logo">
                    <div class="navbar-brand">
                        
                        <span class="navbar-caption-wrap"><a class="navbar-caption text-success display-5" href="/">
                                fastbuy.co</a></span>
                    </div>
                </div>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
                                <li class="nav-item">
                                        <a class="nav-link link text-white display-4" href="/productlist/<%= customer.customer_id %>">
                                            <span class="mbri-home mbr-iconfont mbr-iconfont-btn"></span>
                                            View suppliers
                                        </a>
                                    </li>
                            <li class="nav-item">
                                <a class="nav-link link text-white display-4" href="/editcustomer/<%= customer.customer_id %>">
                                    <span class="mbri-home mbr-iconfont mbr-iconfont-btn"></span>
                                    Edit Profile
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link link text-white display-4" href="/supplierlogin"><span class="mbri-cash mbr-iconfont mbr-iconfont-btn"></span>
                                    
                                    Summary
                                </a>
                            </li></ul>
                        
                    </div>
            </nav>
            <% } %>
        </section>
        


 

<div class="main">
      
        <div class="container" style="width:100%">
           
           
            <div class="row search" style="padding-top:100px">
            <div class="col-md-8" >  
                <h2 class="mbr-section-title pb-3 align-center mbr-fonts-style display-2">
                        Supplier List </h2>
             <h3 class="mbr-section-subtitle display-5 align-center mbr-fonts-style mbr-light">
                 <%= businessType %>
            </h3> 
        </div>
        <div class="col-md-4">
            <label class="searchInfo mbr-fonts-style display-7">Search:</label>
            <input class="form-control input-sm"  id="quicksearch" value="<%= search %>" onkeypress="if (event.keyCode==13){ myFunction();return false;}">
            
            <label class="container-check" style="background-color:white"> <h1 class="card-title mbr-fonts-style display-7" ><h5 style="color: rgb(130, 133, 131);font-weight: bold">AVL</h5>
                               
            </h1> 
            <% if (checked) {%>    
            <input type="checkbox"  id = "AVL" onchange="getAVL(this)" checked="checked">
            
            <% } else { %>
                <input type="checkbox"  id = "AVL" onchange="getAVL(this)"  >
                <input type="hidden" name="avlList" id="avlList" class="form-control" value="<%= avls %>">       
           
                <% } %>
            <span class="checkmark"   > </span>
         </label>  
            <input type="hidden" name="business" id="business" class="form-control" value="<%= businessType %>">       
                                             
                             
        </div>
      
        
                    <!-- <div class="container"> -->
            
                            
                   
                </div>
       
         
        
            <div class="grid" data-masonry='{ "itemSelector": ".grid-item"}'>
                    <% if (suppliers.length > 0) {%>
                      
                        <% suppliers.forEach((supplier, index) => { %>
                            <div class="col-lg-4 col-md-6">
                                    <div class="grid-item">
                                            <% if (checked) {%>  
                                 <a data-toggle="modal" data-target="#removeAVL" onclick="removeAVL(document.getElementById('Name_<%= supplier.supplier_id %>').value, '<%= supplier.supplier_id %>' )" ><i id="avl_<%= supplier.supplier_id %>"><i id="avl_<%= supplier.supplier_id %>" class="fa fa-bookmark"  style="font-size:24px;color:#4169E1 "></i></a>
                                 <% } else { %>
                                    <a data-toggle="modal"  data-target="#addAVL" onclick="showAVL(document.getElementById('Name_<%= supplier.supplier_id %>').value,document.getElementById('List_<%= supplier.supplier_id %>').value)" ><i id="avl_<%= supplier.supplier_id %>" class="fa fa-bookmark"  style="font-size:24px;color:gray "></i></a>
                               
                                    <% } %> 
                            <label class="container-check" style="background-color:white" style="width:50%"> <h1 class="card-title mbr-fonts-style display-7" ><h5 style="color: rgb(130, 133, 131);font-weight: bold">ขอราคา</h5>
                               
                            </h1>
                            
                             
                                <input type="checkbox" style="width:60%" id = "check_<%= supplier.supplier_id %>" onchange="addInList(this,document.getElementById(' <%= supplier.supplier_id %>').value,document.getElementById('List_<%= supplier.supplier_id %>').value)">
                                
                               
                                     
                                <span class="checkmark"   > </span>
                                
                                <input class="form-control input-sm" id=" <%= supplier.supplier_id %>" value="<%= supplier.sale_email %>">
                                <input class="form-control input-sm" id="List_<%= supplier.supplier_id %>" value="<%= supplier.supplier_id %>">
                                <input class="form-control input-sm" id="Name_<%= supplier.supplier_id %>" value="<%= supplier.supplier_name %>">
                               
                            </label>
                             <!-- Trigger the modal with a button -->
 
                             
                        <div class="card-img" style="width:90%;padding-left: 10%;padding-bottom: 20px"  >
                      
                           
                            <img src="https://res.cloudinary.com/hdzvdkljx/image/upload/v1542551745/supplier_logo/<%= supplier.Photo %>" class="player-img" style="height:80%" data-toggle="modal" data-target="#myModal<%= supplier.supplier_id %>" alt="Mobirise"> 
                        </div>
                    
                        <div  class="card-box">
                            <h4 class="card-title mbr-fonts-style display-7">
                                    <%= supplier.supplier_name %>
                            </h4>
                            <p  class="mbr-text mbr-fonts-style align-left display-7">

                                   <%= supplier.supplier_info%>
                                   <br>
                                    <%= supplier.address %>
                                   
                                    
                            </p>
                       
                     
                        </div>
                              <!-- Modal -->
  <div class="modal fade" id="myModal<%= supplier.supplier_id %>" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <!-- <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h6 class="modal-title">Modal Header</h6>
        </div> -->
        <div class="modal-body">
                <div class="card-img" style="width:90%;padding-left: 10%;padding-bottom: 20px"  >
                      
                           
                        <img src="https://res.cloudinary.com/hdzvdkljx/image/upload/v1542551745/supplier_logo/<%= supplier.Photo %>" class="player-img" style="height:60%"  alt="Mobirise"> 
                    </div>
                
            <div  class="card-box">
                <h4 class="card-title mbr-fonts-style display-7">
                        <%= supplier.supplier_name %>
                </h4>
                <p  class="mbr-text mbr-fonts-style align-left display-7">

                       <%= supplier.supplier_info%>
                       <br>
                       <%= supplier.product_info %>
                       <br>
                        <%= supplier.address %>
                        
                       
                        
                </p>
           
         
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
                    </div>
              
 
                </div>

                            
      
    </div>
  </div>
             
  

                <% }) %>
           
       
                <% } else { %>
                    <p class="text-center">No supplier found.</p>
                <% } %>
            
        </div>
        
    </div>
   
 
       </div>
    <!-- close col-md-8> -->
    
    


  
     
    
    <section class="cid-raqq2LH4NR" id="footer5-1n">

    

    
        <div class="main">
		<div class="container">
			<div class="media-container-row">
				<div class="col-md-3">
					<div class="media-wrap">
						<a href="https://mobirise.com/">
						   <img src="/assets/images/mbr-192x192.jpg" alt="Mobirise" title="">
						</a>
					</div>
				</div>
				<div class="col-md-9">
					<p class="mbr-text align-right links mbr-fonts-style display-7">
						<a href="#" class="text-black">ABOUT</a> &nbsp;&nbsp;&nbsp;&nbsp;
						<a href="#" class="text-black">TERMS</a> &nbsp;&nbsp;&nbsp;&nbsp;
						<a href="#" class="text-black">CAREERS</a> &nbsp;&nbsp;&nbsp;&nbsp;
						<a href="#" class="text-black">CONTACT</a>
					</p>
				</div>
			</div>
			<div class="footer-lower">
				<div class="media-container-row">
					<div class="col-md-12">
						<hr>
					</div>
				</div>
				<div class="media-container-row mbr-white">
					<div class="col-md-6 copyright">
						<p class="mbr-text mbr-fonts-style display-7">
							© Copyright 2018 fastbuy.co - All Rights Reserved
						</p>
					</div>
					<div class="col-md-6">
						<div class="social-list align-right">
							<div class="soc-item">
								<a href="https://twitter.com/mobirise" target="_blank">
									<span class="socicon-twitter socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
							<div class="soc-item">
								<a href="https://www.facebook.com/pages/Mobirise/1616226671953247" target="_blank">
									<span class="socicon-facebook socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
							<div class="soc-item">
								<a href="https://www.youtube.com/c/mobirise" target="_blank">
									<span class="socicon-youtube socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
							<div class="soc-item">
								<a href="https://instagram.com/mobirise" target="_blank">
									<span class="socicon-instagram socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
							<div class="soc-item">
								<a href="https://plus.google.com/u/0/+Mobirise" target="_blank">
									<span class="socicon-googleplus socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
							<div class="soc-item">
								<a href="https://www.behance.net/Mobirise" target="_blank">
									<span class="socicon-behance socicon mbr-iconfont mbr-iconfont-social"></span>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
        </div>
    </div>
    </section>
 
    <div class="sidenav" >
       
        <div class="dataTables_filter" id="formEmail">
          
          <label class="searchInfo mbr-fonts-style display-7">Email List:</label>
          <textarea type="text" class="form-control" name="EmailList" rows="3" data-form-field="EmailList" id="ListEmail"></textarea>
          <textarea type="hidden" class="form-control" name="ListId" rows="3" data-form-field="IdList" id="ListId"></textarea>
        
            <label class="searchInfo mbr-fonts-style display-7">Topic:</label>
          <input class="form-control input-sm" id="Topic" onchange="savedata()">
          
          <input class="form-control input-sm" id="customerID" type="hidden" value="<%= customer.customer_id %>"> 
            
            <label class="searchInfo mbr-fonts-style display-7">ข้อความ:</label>  
            <textarea type="text" class="form-control" name="message" onchange="savedata()" rows="6" data-form-field="Message" id="Message"></textarea>
         
          <input class="form-control input-sm" id="quicksearch1" type="hidden" value="<%= businessType %>/<%= customer.customer_id %>"> 
          <label for="customer-img"><b>แนบไฟล์</b></label><br>
          <input type="file" name="image" id="attachment" class="" >
          <button id="askprice" onclick="sendMail()" class="btn btn-primary">ขอราคา</button>
          <!-- <button id="askprice" onclick="sendMail()" class="btn btn-primary btn-lg">ขอราคา</button> -->
           <!-- <input type="text" class="form-control input-sm" id="myInput" onkeyup="myFunction()" placeholder="Search for names..">
   -->      </div> 
    
</div>

<div id="mySidenav" style="padding-top:200px;">
        
        <a href="#" id="price" data-toggle="modal" data-target="#myEmail" onclick="showForm()">ขอราคา</a>
        <a href="#" id="search">ค้นหา</a>
      </div>

                               <!-- Modal  add AVL-->

                               <div class="modal fade" id="addAVL" role="dialog">
                                    <div class="modal-dialog">
                                    
                                      <!-- Modal content-->
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                                          <h5 id="supplierAVLname" class="modal-title"></h5>
                                        </div> 
                                        <div class="modal-body">
                                                <form id="avl" class="add-player-form" action="/saveavl" method="post" enctype="multipart/form-data">
                                                  <label class="searchInfo mbr-fonts-style display-7">Supplier number</label>
                                                <input class="form-control input-sm" id="supplierno" name="supplierno" >
                                                
                                                  <label class="searchInfo mbr-fonts-style display-7">contact Email</label>  
                                                  <input type="text" class="form-control" name="contactEmail"  data-form-field="Message" id="contactEmail"></textarea>
                                                  <label class="searchInfo mbr-fonts-style display-7">contact Number</label>  
                                                  <input type="text" class="form-control" name="contactNo"  data-form-field="Message" id="contactNo"></textarea>
                                                   <input type="hidden" name="supplierid"  id="supplierid" class="form-control">  
                                                   <input type="hidden" name="customerid" id="customerid" class="form-control" value="<%= customer.customer_id %>">       
                                                 
                                                  <!-- <input type="hidden" id="suppliername" class="form-control">  -->
                                                     
                                               <!-- <button id="askprice" onclick="sendMail()" class="btn btn-primary btn-lg">ขอราคา</button> -->
                                                 <!-- <input type="text" class="form-control input-sm" id="myInput" onkeyup="myFunction()" placeholder="Search for names..">
                                         -->   
                                          
                                        </div>
                                        <div class="modal-footer">
                                              
                                                <button type="submit" class="btn btn-primary">ยืนยัน</button>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                        
                                        </div>
                                    </form>
                                      </div>
                                                    </div>
                                              
                                 
                                                </div>

                               <!-- Modal  Remove AVL-->

                               <div class="modal fade" id="removeAVL" role="dialog">
                                    <div class="modal-dialog">
                                    
                                      <!-- Modal content-->
                                      <div class="modal-content">
                                        <div class="modal-header">
                                         
                                                <h4 id="supplierAVLname1" class="modal-title"></h4>
                                        </div> 
                                        <form id="avl" class="add-player-form" action="/removeavl" method="post" enctype="multipart/form-data">
                                          
                                        <input type="hidden" name="supplierid1"  id="supplierid1" class="form-control">  
                                        <input type="hidden" name="customerid1" id="customerid" class="form-control" value="<%= customer.customer_id %>">       
                                                 
                                        <div class="modal-footer">
                                              
                                                <button type="submit" class="btn btn-primary">ยืนยัน</button>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                        
                                        </div>
                                    </form>
                                      </div>
                                                    </div>
                                              
                                 
                                                </div>
 
                                                      <!-- Modal send Mail -->
                                <div class="modal fade" id="myEmail" role="dialog" style="padding-top:80px">
                                    <div class="modal-dialog">
                                    
                                      <!-- Modal content-->
                                      <div class="modal-content">
                                        <!-- <div class="modal-header">
                                          <button type="button" class="close" data-dismiss="modal">&times;</button>
                                          <h6 class="modal-title">Modal Header</h6>
                                        </div> -->
                                        <div class="modal-body">
                                                <label class="searchInfo mbr-fonts-style display-7">Email List:</label>
                                                <textarea type="text" class="form-control" name="EmailList" rows="2" data-form-field="EmailList" id="ListEmail1"></textarea>
                                                <textarea type="hidden" class="form-control" name="ListId" rows="3" data-form-field="IdList" id="ListId1"></textarea>
                                              
                                                  <label class="searchInfo mbr-fonts-style display-7">Topic:</label>
                                                <input class="form-control input-sm" id="Topic" onchange="savedata()">
                                                
                                                  
                                                  <label class="searchInfo mbr-fonts-style display-7">ข้อความ:</label>  
                                                  <textarea type="text" class="form-control" name="message" onchange="savedata()" rows="4" data-form-field="Message" id="Message1"></textarea>
                                               
                                                 <label for="customer-img"><b>แนบไฟล์</b></label><br>
                                                <input type="file" name="image" id="attachment" class="" >
                                               <!-- <button id="askprice" onclick="sendMail()" class="btn btn-primary btn-lg">ขอราคา</button> -->
                                                 <!-- <input type="text" class="form-control input-sm" id="myInput" onkeyup="myFunction()" placeholder="Search for names..">
                                         -->   
                                          
                                        </div>
                                        <div class="modal-footer">

                                                <button id="askprice"  class="btn btn-primary" onclick="sendMail()">ขอราคา</button>
                                             
                                            <button type="button" class="btn btn-default" data-dismiss="modal">ยกเลิก</button>
                                        
                                        </div>
                                      </div>
                                     </div>
  
                                     </div>

<script>
function myFunction() {
  // Declare variables 
  var search = document.getElementById("quicksearch").value; 
  var search1 = document.getElementById("quicksearch1").value; 
  var check_avl = document.getElementById("AVL").checked;
  var custid = document.getElementById("customerID").value;
    var business = document.getElementById("business").value;
    
  if (check_avl == false) {
    if (search !== "" ){
    window.location.href= '/getsearchlist/' + search1 + "/" +search;
  } else {
    window.location.href= '/getsupplierlist/' + search1;
  }
  }else {
    if (search !== "" ){

    window.location.href= '/getsearchavl/'+ business + "/" + custid +"/" +search;

}else {
    window.location.href= '/getavl/'+ business + "/" + custid;
  }
  }
 
 
};

var array;
var array1;
function addInList(checkbox,supplierEmail,supplierId) {
    var newItem = supplierEmail;
    var newItem1 = supplierId;
array = document.getElementById("ListEmail").value.split(",");
array1 = document.getElementById("ListId").value.split(",");

    if(checkbox.checked == true){
      
        array.indexOf(newItem) === -1 ? array.push(newItem) : console.log("This item already exists");
            array1.indexOf(newItem1) === -1 ? array1.push(newItem1) : console.log("This item already exists");
           

}
else{
        array.indexOf(newItem) !== -1 ? array.splice(array.indexOf(newItem),1): console.log("already removed");
        array1.indexOf(newItem1) !== -1 ? array1.splice(array1.indexOf(newItem1),1): console.log("already removed");

   }
   
   sessionStorage.setItem("EmailList", array);
   sessionStorage.setItem("Listid", array1);
   document.getElementById("ListEmail").value =  sessionStorage.getItem("EmailList");
   document.getElementById("ListId").value = sessionStorage.getItem("Listid");
   
};
function showForm(){
    document.getElementById("ListEmail1").value =  document.getElementById("ListEmail").value;
   document.getElementById("ListId1").value = document.getElementById("ListId").value;
//    document.getElementById("ListId1").value = document.getElementById("ListId").value;
};
 
function savedata() {
    var topic =  document.getElementById("Topic").value;
    var message =  document.getElementById("Message").value;
    sessionStorage.setItem("Topic", topic);
   sessionStorage.setItem("Message", message);

};
document.getElementById("Topic").value =  sessionStorage.getItem("Topic");
document.getElementById("Message").value = sessionStorage.getItem("Message");
document.getElementById("ListEmail").value =  sessionStorage.getItem("EmailList");
document.getElementById("ListId").value = sessionStorage.getItem("Listid");
if (sessionStorage.getItem("Listid") !== null){
var i;
var idlist =  sessionStorage.getItem("Listid").split(",");
// console.log(idlist);
for (i = 0; i < idlist.length; i++) {
    if (idlist[i] !== ""){
        var id_number = "check_"+ idlist[i]; 
    //console.log(id_number);
    if  (document.getElementById(id_number) !== null) {
    document.getElementById(id_number).checked = true;
}
    }
   
    // 
}
};
if (document.getElementById("avlList").value !== null){
    var avllist = document.getElementById("avlList").value.split(",");
console.log(avllist.length);
 if (avllist.length > 0){
for (i = 0; i < avllist.length; i++) {
    
        var avl_number = "avl_"+ avllist[i]; 
//      console.log(avl_number);
if  (document.getElementById(avl_number) !== null) {
     document.getElementById(avl_number).style.color= "#4169E1";
    }
}
}

   
//     // 
 };


function showAVL(supplierName,supplierId) {
//console.log(supplierId);
document.getElementById("supplierAVLname").textContent = "Do you want to add " +supplierName +" to your AVL? Please add more information below" ;
document.getElementById("supplierid").value = supplierId;
document.getElementById("suppliername").value = supplierName;
};

function removeAVL (supplierName,supplierId)  {
// console.log(supplierId);
    document.getElementById("supplierAVLname1").textContent = "Do you want to remove " +supplierName +" from your AVL?" ;
document.getElementById("supplierid1").value = supplierId;
document.getElementById("suppliername1").value = supplierName;
};

function getAVL (checkbox){
    var custid = document.getElementById("customerID").value;
    var business = document.getElementById("business").value;
    
    if(checkbox.checked == true){
 
        window.location.href= '/getavl/'+ business + "/" + custid;
    
     
       
    } else {
 
        window.location.href= '/getsupplierlist/'+ business + "/" + custid;
      
      
 
    }


};

// function saveAVL(){
// var suppid = document.getElementById("supplierid").value;
// var custid = document.getElementById("customerID").value;

//     window.location.href= '/saveavl/'+ custid + "/" + suppid;

// }

function sendMail() {
  // Declare variables 
 
//   var customerid = document.getElementById("customerID").value;
// //   console.log(customerid);
// var link ='/sendmail/' + customerid +"/17/" + array;
// window.location.href = link;
sessionStorage.clear();
window.location.reload();
};

</script>

  <script src="/assets/web/assets/jquery/jquery.min.js"></script>
  <script src="/assets/popper/popper.min.js"></script>
  <script src="/assets/tether/tether.min.js"></script>
  <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="/assets/smoothscroll/smooth-scroll.js"></script>
  <script src="/assets/dropdown/js/script.min.js"></script>
  <script src="/assets/touchswipe/jquery.touch-swipe.min.js"></script>
  <script src="/assets/viewportchecker/jquery.viewportchecker.js"></script>
  
  <script src="/assets/datatables/data-tables.bootstrap4.min.js"></script>
  <script src="/assets/theme/js/script.js"></script>
  <script src="/assets/formoid/formoid.min.js"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>

  </body>
</html>